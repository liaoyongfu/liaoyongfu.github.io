<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta name="description" content="加油！">
<meta property="og:type" content="website">
<meta property="og:title" content="liaoyf的博客">
<meta property="og:url" content="https://liaoyongfu.github.io/page/3/index.html">
<meta property="og:site_name" content="liaoyf的博客">
<meta property="og:description" content="加油！">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="liaoyf的博客">
<meta name="twitter:description" content="加油！">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://liaoyongfu.github.io/page/3/"/>





  <title>liaoyf的博客</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?9de8fd632ad583c841a2a4fa8c3f5bc4";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>










</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">liaoyf的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">一分耕耘一分收获</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://liaoyongfu.github.io/2017/08/02/webpack/webpack学习05——长期缓存/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="liaoyf">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liaoyf的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/02/webpack/webpack学习05——长期缓存/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-02T11:44:45+08:00">
                2017-08-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          
             <span id="/2017/08/02/webpack/webpack学习05——长期缓存/" class="leancloud_visitors" data-flag-title="">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="webpack学习05——长期缓存"><a href="#webpack学习05——长期缓存" class="headerlink" title="webpack学习05——长期缓存"></a>webpack学习05——长期缓存</h2><p>有两种级别的添加hash方法：</p>
<ul>
<li>Compute a hash of all chunks and add it.</li>
<li>Compute a hash per chunk and add it.</li>
</ul>
<h2 id="方法一：只有一个hash"><a href="#方法一：只有一个hash" class="headerlink" title="方法一：只有一个hash"></a>方法一：只有一个hash</h2><pre><code>{
    output: {
        path: path.join(__dirname, &quot;assets&quot;, &quot;[hash]&quot;),
        publicPath: &quot;assets/[hash]/&quot;,
        filename: &quot;output.[hash].bundle.js&quot;,
        chunkFilename: &quot;[id].[hash].bundle.js&quot;
    }
}
</code></pre><h2 id="方法二：每个块都有一个hash"><a href="#方法二：每个块都有一个hash" class="headerlink" title="方法二：每个块都有一个hash"></a>方法二：每个块都有一个hash</h2><pre><code>output: { chunkFilename: &quot;[chunkhash].bundle.js&quot; }
</code></pre><p>Note that you need to reference the entry chunk with its hash in your HTML. You may want to extract the hash or the filename from the stats.</p>
<p>In combination with Hot Code Replacement you must use option 1, but not on the publicPath config option.</p>
<h2 id="从文件名获取状态"><a href="#从文件名获取状态" class="headerlink" title="从文件名获取状态"></a>从文件名获取状态</h2><p>You probably want to access the final filename of the asset to embed it into your HTML. This information is available in the webpack stats. If you are using the CLI you can run it with –json to get the stats as JSON to stdout.</p>
<p>You can add a plugin such as assets-webpack-plugin to your configuration which allows you to access the stats object. Here is an example how to write it into a file:</p>
<pre><code>plugins: [
  function() {
    this.plugin(&quot;done&quot;, function(stats) {
      require(&quot;fs&quot;).writeFileSync(
        path.join(__dirname, &quot;..&quot;, &quot;stats.json&quot;),
        JSON.stringify(stats.toJson()));
    });
  }
]
</code></pre><p>The stats JSON contains a useful property assetsByChunkName which is a object containing chunk name as key and filename(s) as value.</p>
<blockquote>
<p>Note: It’s an array if you are emitting multiple assets per chunk. I. e. a JavaScript file and a SourceMap. The first one is your JavaScript source.</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://liaoyongfu.github.io/2017/08/02/webpack/webpack学习04——压缩优化/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="liaoyf">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liaoyf的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/02/webpack/webpack学习04——压缩优化/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-02T11:44:45+08:00">
                2017-08-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          
             <span id="/2017/08/02/webpack/webpack学习04——压缩优化/" class="leancloud_visitors" data-flag-title="">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="webpack学习04——压缩优化"><a href="#webpack学习04——压缩优化" class="headerlink" title="webpack学习04——压缩优化"></a>webpack学习04——压缩优化</h2><h2 id="压缩"><a href="#压缩" class="headerlink" title="压缩"></a>压缩</h2><p>为了压缩你的脚本（和你的样式，如果你用<code>css-loader</code>的话），webpack支持下面两个途径：</p>
<pre><code>--optimize-minimize 或者 new webpack.optimize.UglifyJsPlugin()
</code></pre><p>webpack给你的模块和块赋予了id来区别他们，webpack可以为经常用到的id通过下面途径得到最小id长度：</p>
<pre><code>--optimize-occurrence-order resp. new webpack.optimize.OccurrenceOrderPlugin()
</code></pre><h2 id="去重"><a href="#去重" class="headerlink" title="去重"></a>去重</h2><p>如果你使用第三方库有相同依赖时，会重复引用相同的文件，webpack可以找到并去重，默认是不开启的，可以使用一下方法开启：</p>
<pre><code>--optimize-dedupe resp. new webpack.optimize.DedupePlugin()
</code></pre><h2 id="块优化"><a href="#块优化" class="headerlink" title="块优化"></a>块优化</h2><p>限制快的最大大小 –optimize-max-chunks 15 new webpack.optimize.LimitChunkCountPlugin({maxChunks: 15})<br>限制块的最小大小 –optimize-min-chunk-size 10000 new webpack.optimize.MinChunkSizePlugin({minChunkSize: 10000})</p>
<p>Webpack会照顾它通过合并块（它会合并块，有重复的模块）。不会有东西合并到入口块，所以不会影响初始页面加载时间。</p>
<h3 id="单页应用"><a href="#单页应用" class="headerlink" title="单页应用"></a>单页应用</h3><p>A Single-Page-App is the type of web app webpack is designed and optimized for.</p>
<p>You may have split the app into multiple chunks, which are loaded at your router. The entry chunk only contains the router and some libraries, but no content. This works great while your user is navigating through your app, but for initial page load you need 2 round trips: One for the router and one for the current content page.</p>
<p>If you use the HTML5 History API to reflect the current content page in the URL, your server can know which content page will be requested by the client code. To save round trips to the server you can include the content chunk in the response: This is possible by just adding it as script tag. The browser will load both chunks parallel.</p>
<pre><code>&lt;script src=&quot;entry-chunk.js&quot; type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;3.chunk.js&quot; type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;
</code></pre><p>You can extract the chunk filename from the stats. (stats-webpack-plugin could be used for exports the build stats)</p>
<h3 id="多页应用"><a href="#多页应用" class="headerlink" title="多页应用"></a>多页应用</h3><pre><code>var CommonsChunkPlugin = require(&quot;webpack/lib/optimize/CommonsChunkPlugin&quot;);
module.exports = {
    entry: {
        p1: &quot;./page1&quot;,
        p2: &quot;./page2&quot;,
        p3: &quot;./page3&quot;,
        ap1: &quot;./admin/page1&quot;,
        ap2: &quot;./admin/page2&quot;
    },
    output: {
        filename: &quot;[name].js&quot;
    },
    plugins: [
        new CommonsChunkPlugin(&quot;admin-commons.js&quot;, [&quot;ap1&quot;, &quot;ap2&quot;]),
        new CommonsChunkPlugin(&quot;commons.js&quot;, [&quot;p1&quot;, &quot;p2&quot;, &quot;admin-commons.js&quot;])
    ]
};
// &lt;script&gt;s required:
// page1.html: commons.js, p1.js
// page2.html: commons.js, p2.js
// page3.html: p3.js
// admin-page1.html: commons.js, admin-commons.js, ap1.js
// admin-page2.html: commons.js, admin-commons.js, ap2.js
</code></pre><p>Advanced hint: You can run code inside the commons chunk:</p>
<pre><code>var CommonsChunkPlugin = require(&quot;webpack/lib/optimize/CommonsChunkPlugin&quot;);
module.exports = {
    entry: {
        p1: &quot;./page1&quot;,
        p2: &quot;./page2&quot;,
        commons: &quot;./entry-for-the-commons-chunk&quot;
    },
    plugins: [
        new CommonsChunkPlugin(&quot;commons&quot;, &quot;commons.js&quot;)
    ]
};
</code></pre><p>See also multiple-entry-points example and advanced multiple-commons-chunks example.</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://liaoyongfu.github.io/2017/08/02/webpack/webpack学习03——样式/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="liaoyf">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liaoyf的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/02/webpack/webpack学习03——样式/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-02T11:44:45+08:00">
                2017-08-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          
             <span id="/2017/08/02/webpack/webpack学习03——样式/" class="leancloud_visitors" data-flag-title="">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="webpack学习03——样式"><a href="#webpack学习03——样式" class="headerlink" title="webpack学习03——样式"></a>webpack学习03——样式</h2><h2 id="嵌入样式"><a href="#嵌入样式" class="headerlink" title="嵌入样式"></a>嵌入样式</h2><pre><code>{ test: /\.css$/, loader: &quot;style-loader!css-loader&quot; }
</code></pre><p>这种情况下会在页面添加style标签式的样式</p>
<h2 id="抽成样式文件"><a href="#抽成样式文件" class="headerlink" title="抽成样式文件"></a>抽成样式文件</h2><p>可以使用<code>extract-text-webpack-plugin</code>抽成样式文件。</p>
<pre><code>var ExtractTextPlugin = require(&quot;extract-text-webpack-plugin&quot;);
...
loaders: [
    // Extract css files
    {
        test: /\.css$/,
        loader: ExtractTextPlugin.extract(&quot;style-loader&quot;, &quot;css-loader&quot;)
    },
    // Optionally extract less files
    // or any other compile-to-css language
    {
        test: /\.less$/,
        loader: ExtractTextPlugin.extract(&quot;style-loader&quot;, &quot;css-loader!less-loader&quot;)
    }
    // You could also use other loaders the same way. I. e. the autoprefixer-loader
],
plugins: [
     new ExtractTextPlugin(&quot;[name].css&quot;)
]
</code></pre><h3 id="所有样式文件合并成一个样式文件"><a href="#所有样式文件合并成一个样式文件" class="headerlink" title="所有样式文件合并成一个样式文件"></a>所有样式文件合并成一个样式文件</h3><pre><code>plugins: [
    new ExtractTextPlugin(&quot;style.css&quot;, {
        allChunks: true
    })
]
</code></pre><h3 id="公共样式"><a href="#公共样式" class="headerlink" title="公共样式"></a>公共样式</h3><p>和<code>CommonsChunkPlugin</code>一起使用，commons块就会生成commons.css样文件。</p>
<pre><code>plugins: [
    new webpack.optimize.CommonsChunkPlugin(&quot;commons&quot;, &quot;commons.js&quot;),
    new ExtractTextPlugin(&quot;[name].css&quot;)
]
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://liaoyongfu.github.io/2017/08/02/webpack/webpack学习02——代码分割/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="liaoyf">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liaoyf的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/02/webpack/webpack学习02——代码分割/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-02T11:44:45+08:00">
                2017-08-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          
             <span id="/2017/08/02/webpack/webpack学习02——代码分割/" class="leancloud_visitors" data-flag-title="">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="webpack学习02——代码分割"><a href="#webpack学习02——代码分割" class="headerlink" title="webpack学习02——代码分割"></a>webpack学习02——代码分割</h1><h2 id="定义一个代码分割点"><a href="#定义一个代码分割点" class="headerlink" title="定义一个代码分割点"></a>定义一个代码分割点</h2><h3 id="commonjs-require-ensure"><a href="#commonjs-require-ensure" class="headerlink" title="commonjs: require.ensure"></a>commonjs: <code>require.ensure</code></h3><pre><code>require.ensure(dependencies, callback)
</code></pre><p>example:</p>
<pre><code>//require.ensure仅仅加载而不执行模块
require.ensure([&quot;module-a&quot;, &quot;module-b&quot;], function(require) {
    var a = require(&quot;module-a&quot;);
    // ...
});
</code></pre><h3 id="AMD-require"><a href="#AMD-require" class="headerlink" title="AMD: require"></a>AMD: <code>require</code></h3><pre><code>require(dependencies, callback)
</code></pre><p>example:</p>
<pre><code>//AMD的require加载并会执行模块
require([&quot;module-a&quot;, &quot;module-b&quot;], function(a, b) {
    // ...
});
</code></pre><h3 id="ES6模块"><a href="#ES6模块" class="headerlink" title="ES6模块"></a>ES6模块</h3><p><strong>webpack1是不支持原生es6模块的，可以通过babal转换</strong></p>
<h2 id="块的内容"><a href="#块的内容" class="headerlink" title="块的内容"></a>块的内容</h2><p>所有分隔的文件会成为一个块，这个块是由其依赖递归加进去的。</p>
<h2 id="块压缩"><a href="#块压缩" class="headerlink" title="块压缩"></a>块压缩</h2><p>如果两个块包含同一个模块，他们会被合并成一个。这可能造成块有相同的父级。<br>如果一个模块在一个块的所有父级中是可获取的，这个模块将会在这个块中删除。<br>如果一个块包含另一个块的所有模块，则存储这个块，它实现多个块。</p>
<h2 id="块加载"><a href="#块加载" class="headerlink" title="块加载"></a>块加载</h2><p>根据配置<code>target</code>目标，将将块加载的运行时逻辑添加到包中。例如：<code>web</code>目标块通过jsonp加载。只有一个块被加载一次，并行请求被合并成一个。运行时检查加载的块是否完成多个块。</p>
<h2 id="块的类型"><a href="#块的类型" class="headerlink" title="块的类型"></a>块的类型</h2><h3 id="入口块"><a href="#入口块" class="headerlink" title="入口块"></a>入口块</h3><p>一个入口块包含了请求时加载的模块。如果这个块包含模块<code>0</code>则加载并执行它，如果没有，它等待有请求模块<code>0</code>的块。</p>
<h3 id="正常块"><a href="#正常块" class="headerlink" title="正常块"></a>正常块</h3><p>一个正常的块不会在运行时加载，它仅仅包含一些模块，这个结构依赖于块加载算法，例如：如果目标是jsonp，则这些模块会包含一个jsonp回调函数，这个块当然还包含它负责的一些块id列表。</p>
<h3 id="初始化块（非入口）"><a href="#初始化块（非入口）" class="headerlink" title="初始化块（非入口）"></a>初始化块（非入口）</h3><p>一个初始化块是一个正常的块，不同的仅仅是压缩工具视它更重要，因为它计算向初始加载时间（像入口块），这个块类型可以结合<code>CommonsChunkPlugin</code>发生。</p>
<h3 id="分隔app和vendor代码"><a href="#分隔app和vendor代码" class="headerlink" title="分隔app和vendor代码"></a>分隔app和vendor代码</h3><pre><code>var webpack = require(&quot;webpack&quot;);

module.exports = {
  entry: {
    app: &quot;./app.js&quot;,
    vendor: [&quot;jquery&quot;, &quot;underscore&quot;, ...],
  },
  output: {
    filename: &quot;bundle.js&quot;
  },
  plugins: [
    new webpack.optimize.CommonsChunkPlugin(/* chunkName= */&quot;vendor&quot;, /* filename= */&quot;vendor.bundle.js&quot;)
  ]
};
</code></pre><p>vendor块将会从移除所有在app块中的模块，使得bundle块仅仅包含你的代码而不包含其依赖。</p>
<pre><code>&lt;script src=&quot;vendor.bundle.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;bundle.js&quot;&gt;&lt;/script&gt;
</code></pre><h3 id="多入口块"><a href="#多入口块" class="headerlink" title="多入口块"></a>多入口块</h3><h4 id="加载多入口"><a href="#加载多入口" class="headerlink" title="加载多入口"></a>加载多入口</h4><p>通过<code>CommonsChukPlugin</code>运行时被移动到公共块，入口文件变成初始化块。只有当初始块可以被加载时，其他入口块才可以被加载。</p>
<pre><code>var webpack = require(&quot;webpack&quot;);
module.exports = {
    entry: { a: &quot;./a&quot;, b: &quot;./b&quot; },
    output: { filename: &quot;[name].js&quot; },
    plugins: [ new webpack.optimize.CommonsChunkPlugin(&quot;init.js&quot;) ]
}

&lt;script src=&quot;init.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;a.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;b.js&quot;&gt;&lt;/script&gt;
</code></pre><h3 id="公共块"><a href="#公共块" class="headerlink" title="公共块"></a>公共块</h3><p><code>CommonsChunkPlugin</code>可以移动发生在多个入口的模块到一个新的块（公共块），运行时也移动到公共块，这意味着旧的入口块已经变成初始化块。</p>
<h3 id="压缩优化插件"><a href="#压缩优化插件" class="headerlink" title="压缩优化插件"></a>压缩优化插件</h3><ul>
<li>LimitChunkCountPlugin</li>
<li>MinChunkSizePlugin</li>
<li>AggressiveMergingPlugin</li>
</ul>
<h3 id="命名块"><a href="#命名块" class="headerlink" title="命名块"></a>命名块</h3><p>The require.ensure function accepts an additional 3rd parameter. This must be a string. If two split point pass the same string they use the same chunk.</p>
<h4 id="require-include"><a href="#require-include" class="headerlink" title="require.include"></a>require.include</h4><pre><code>require.include(request)
</code></pre><p>require.include is a webpack specific function that adds a module to the current chunk, but doesn’t evaluate it (The statement is removed from the bundle).</p>
<p>Example:</p>
<pre><code>require.ensure([&quot;./file&quot;], function(require) {
  require(&quot;./file2&quot;);
});

// is equal to

require.ensure([], function(require) {
  require.include(&quot;./file&quot;);
  require(&quot;./file2&quot;);
});
</code></pre><p>require.include can be useful if a module is in multiple child chunks. A require.include in the parent would include the module and the instances of the modules in the child chunks would disappear.</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://liaoyongfu.github.io/2017/08/02/webpack/webpack学习01——简介/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="liaoyf">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liaoyf的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/02/webpack/webpack学习01——简介/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-02T11:44:45+08:00">
                2017-08-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          
             <span id="/2017/08/02/webpack/webpack学习01——简介/" class="leancloud_visitors" data-flag-title="">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="webpack学习01——简介"><a href="#webpack学习01——简介" class="headerlink" title="webpack学习01——简介"></a>webpack学习01——简介</h1><hr>
<p>webpack是一个模块打包工具，</p>
<ul>
<li>webpack特性：<ul>
<li>插件：webpack有大量的插件，大多数的功能是使用这个接口的内部插件，这使得webpack很很大的<strong>灵活性</strong>;</li>
<li>性能：webpack使用异步I/O和多级缓存机制，使得webpack有更快的速度，而且编辑速度超快；</li>
<li>加载器(loaders)：webpack通过定义loaders预处理文件，这允许你打包<strong>任何资源</strong>而不仅仅是javascript，你也可以自己写适合自己的加载器;</li>
<li>模块化：webpack支持AMD和CommonJs模块化规范，它能够聪明地分析你的代码，甚至有一个评估引擎来评估简单的表达式，这个允许你<strong>支持大多数现存模块化规范</strong></li>
<li>代码分割：webpack允许你把代码分割成不同的块<code>thunk</code>，块是按需加载的，这个可以减少初始加载所发费的时间。</li>
<li>代码压缩：webpack可以压缩你的代码，它当然也支持通过哈希缓存；</li>
<li>开发工具：WebPACK支持调试简单sourceurls和sourcemaps。还可以通过<code>development middleware</code>和<code>development server</code>实现<strong>自动刷新</strong>功能;</li>
<li>多个目标：webpack的首要目标是<code>web</code>，但是它也支持在WebWorkers、Node.js中使用；</li>
</ul>
</li>
<li>加载器：<ul>
<li>转换文件；</li>
<li>加载器可以通过管道被链接，最后一个加载器则返回javascript，其他的加载器则可以返回任意的格式代码；</li>
<li>加载器可以是同步或异步的；</li>
<li>加载器在<code>Node.js</code>环境中运行，所以你可以做任何你想要的事情；</li>
<li>加载器支持查询参数；</li>
<li>加载器可以在配置中绑定到扩展名或正则表达式的监听；</li>
<li>加载器可以被发布到<code>npm</code>上或从<code>npm</code>中安装下来；</li>
<li>Normal modules can export a loader in addition to the normal main via package.json loader.</li>
<li>加载器可以访问配置；</li>
<li>插件可以向加载器提供更多的特性和功能；</li>
<li>加载器可以调用额外的任意文件；</li>
<li>。。。</li>
</ul>
</li>
<li><p>加载器解决方案</p>
<p>  加载器类似模块，一个加载器导出一个兼容于Node的javascript函数，一般情况下，你通过<code>npm</code>管理你的加载器，当然你也可以作为文件在你的项目中使用</p>
<ul>
<li>引用加载器：加载器一般以<code>xxx-loader</code>命名，<code>xxx</code>是其名字，例如：<code>json-loader</code>；</li>
<li>你可以通过全名<code>xxx-loader</code>或者短名<code>xxx</code>来使用加载器；</li>
<li>加载器的命名惯例和优先顺序是由<code>resolveLoader.moduleTemplates</code>配置决定的；</li>
<li><p>加载器的命名惯例一些情况下是很有用的，特别是在<code>require()</code>里面引用加载器的时候；</p>
<p>加载器的使用情况：</p>
</li>
<li><p>在<code>require()</code>语句内；</p>
<pre><code>//使用文件loader.js来转换file.txt文件
require(&apos;./loader!./dir/file.txt&apos;);

//使用jade-loader，如果配置文件中已经有绑定到此文件的加载器，他们仍然会运行的
require(&apos;jade!./template.jade&apos;);

//由less-loader-&gt;css-loader-&gt;style-loader转换顺序，由于有前缀`!`，所以如果在配置文件中已经
//有绑定到此文件的加载器，他们将不会运行
require(&apos;!style!css!less!bootstrap/less/bootstrap.less&apos;);    
</code></pre></li>
<li><p>在配置文件中配置；（推荐这种方式）</p>
<pre><code>{
    module: {
        loaders: [
            {test: /\.jade$/, loader: &apos;jade&apos;},
            {test: /\.css$/, loader: &apos;style!css&apos;},
            {test: /\.css$/, loaders: [&apos;style&apos;, &apos;css&apos;]}
        ]
    }
}        
</code></pre></li>
<li><p>在<code>CLI</code>命令行中配置；</p>
<pre><code>webpack --module-bind jade --module-bind &apos;css=style!css&apos;
</code></pre></li>
</ul>
</li>
<li><p>加载器的查询参数</p>
<p>  可以在加载器后面加上<code>?</code>添加多个查询参数，例如：<code>url-loader?mimetype=image/png</code>.大多数的加载器支持正常的格式<code>?key=value&amp;key2=value2</code>和JSON对象格式<code>?{key: &quot;value&quot;, key2: &quot;value2&quot;}</code></p>
<ul>
<li><p>在<code>require()</code>语句中：</p>
<pre><code>require(&apos;url-loader?mimetype=image/png!./file.png&apos;);
</code></pre></li>
<li><p>在配置中：</p>
<pre><code>{test: /\.png$/, loader: &apos;url-loader?mimetype=image/png&apos;}
</code></pre><p>  或者</p>
<pre><code>{
    test: /\.png$/,
    loader: &apos;url-loader&apos;,
    query: {
        mimetype: &apos;image/png&apos;
    }
}
</code></pre></li>
<li><p>在CLI中：</p>
<pre><code>webpack --module-bind &quot;png=url-loader?mimetype=image/png&quot;
</code></pre></li>
</ul>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://liaoyongfu.github.io/2016/08/02/css/HTML不同空格的特性和表现研究/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="liaoyf">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liaoyf的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/08/02/css/HTML不同空格的特性和表现研究/" itemprop="url">HTML不同空格的特性和表现研究</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-08-02T14:38:52+08:00">
                2016-08-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          
             <span id="/2016/08/02/css/HTML不同空格的特性和表现研究/" class="leancloud_visitors" data-flag-title="HTML不同空格的特性和表现研究">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Unicode编码空格"><a href="#Unicode编码空格" class="headerlink" title="Unicode编码空格"></a>Unicode编码空格</h2><ul>
<li><code>&amp;nbsp;</code>: <strong>不换行空格</strong>,用于不会被浏览器判断为可以在中间打断，比如：<code>There is&amp;nbsp;Space</code>，如果会换行，只会在<code>There</code>和<code>is</code>之间换行，而不会在<code>is</code>和<code>Space</code>之间换行。</li>
<li>跟随字体大小产生相应空白的空格：<code>&amp;ensp;</code>(1/2em)，<code>&amp;emsp;</code>(1em)，<code>&amp;thinsp;</code>(1/6em)，这类就很适合坐表单<code>label</code>的排版了，坑爹，终于找到好的解决方法了</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://liaoyongfu.github.io/2016/08/02/css/使用css视口单位/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="liaoyf">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liaoyf的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/08/02/css/使用css视口单位/" itemprop="url">使用css视口单位</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-08-02T14:38:52+08:00">
                2016-08-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          
             <span id="/2016/08/02/css/使用css视口单位/" class="leancloud_visitors" data-flag-title="使用css视口单位">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>css提供了许多单位用来规定元素，最熟悉的莫属<code>px</code>、<code>%</code>、<code>pt</code>、<code>em</code>以及最近比较火的<code>rem</code>，还有其他两个<code>vw</code>、<code>vh</code>，它们是相对单位，但是不同于<code>em</code>和<code>rem</code>那样相对于当前元素或相对于根元素，他们是相对于视口，一个视口单位等于1%的视口的宽度（<code>vw</code>）或高度（<code>vh</code>）。</p>
<p>这是很有用的。<code>vw</code>单位可以用于一些有大小的规则（如：<code>font-size</code>、或者一个<code>div</code>的高度），下面是一些使用案例：</p>
<h2 id="使标题固定"><a href="#使标题固定" class="headerlink" title="使标题固定"></a>使标题固定</h2><p>如果你想让一个标题占满横向屏幕且让他固定在一行，你可以使用<code>vw</code>单位，这实际上是用原生的方法实现了jquery插件<a href="http://fittextjs.com/" target="_blank" rel="external">FitText</a>的功能，但是相对于使用<code>vw</code>，FitText需要手动管理大小，使用检查工具，是一个快速的方法以确定适当的值。</p>
<pre><code>//html
&lt;h1&gt;Always a great fit!&lt;/h1&gt;
//css
h1{
    font-size: 12vw;
    text-align: center;
}
</code></pre><h2 id="Infinite-Lines"><a href="#Infinite-Lines" class="headerlink" title="Infinite Lines"></a>Infinite Lines</h2><p>Whilst building the falcon633 WordPress theme (used on this site), I needed to create an angled background that would appear to continue indefinitely. This is achievable by 1) making sure that the angle in the centre stays the same regardless of window size and 2) setting the height to be relative to the viewport width. I used an SVG background for the overall cut-out then set the height based on the width using vw units.</p>
<h2 id="简单的视频包装"><a href="#简单的视频包装" class="headerlink" title="简单的视频包装"></a>简单的视频包装</h2><p>Let’s say you want to set the proportions of an element, an <code>iframe</code>, to stay at a fixed aspect ratio. You previously might have chosen to create a relative div filling the required space, then set carefully selected padding values with iframe inside absolutely positioned to cling to div on all sides (e.g. the approach demonstrated here).</p>
<p>A better solution could be to use the vw and vh units. This way you can set your height and width directly on the element in question, whilst also keeping the ‘layers-for-layout’ number down.</p>
<h2 id="全屏的hero-Image"><a href="#全屏的hero-Image" class="headerlink" title="全屏的hero Image"></a>全屏的<a href="https://en.wikipedia.org/wiki/Hero_image" title="Hero Image" target="_blank" rel="external"><code>hero Image</code></a></h2><p>你要做的只是在<code>body</code>和<code>html</code>上运用<code>height: 100%</code>，然后在元素上简单地使用<code>width: 100vw; heihgt: 100vh</code>就行了。</p>
<h2 id="div居中"><a href="#div居中" class="headerlink" title="div居中"></a><code>div</code>居中</h2><p>一个常见的需求是要让一个<code>div</code>在页面中居中，这时候只要设置<code>margin: 20vh 20vw; width: 60vw, height: 60vh; padding: 10vh 10vw</code>即可。</p>
<h2 id="浏览器支持情况"><a href="#浏览器支持情况" class="headerlink" title="浏览器支持情况"></a>浏览器支持情况</h2><p>IE9及以上</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://liaoyongfu.github.io/2016/08/02/angular2/遇到的问题/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="liaoyf">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liaoyf的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/08/02/angular2/遇到的问题/" itemprop="url">angular2遇到的问题.md</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-08-02T14:38:52+08:00">
                2016-08-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          
             <span id="/2016/08/02/angular2/遇到的问题/" class="leancloud_visitors" data-flag-title="angular2遇到的问题.md">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ol>
<li><p>在组件时<code>moduleId: module.id</code>时，报<code>Cannot find name &#39;module&#39;</code>?</p>
<p> 解决方法：</p>
<p> You need to install node ambientDependencies. Typings.json</p>
<pre><code>&quot;ambientDependencies&quot;: {
    &quot;node&quot;: &quot;github:DefinitelyTyped/DefinitelyTyped/node/node.d.ts#138ad74b9e8e6c08af7633964962835add4c91e2&quot;
}
</code></pre><p> Another way can use typings manager to install node definition file globally:</p>
<pre><code>typings install dt~node --global --save
</code></pre><p> Then your typings.json file will look like this:</p>
<pre><code>&quot;globalDependencies&quot;: {
      &quot;node&quot;: &quot;registry:dt/node#6.0.0+20160608110640&quot;
}
</code></pre><p> If you use Typescript 2^ just use the following command:</p>
<pre><code>npm install @types/node --global --save
</code></pre><p> Or install it within the project:</p>
<pre><code>npm install @types/node --save
</code></pre><p> and then add a reference to it from your bootstrap:</p>
<pre><code>///&lt;reference path=&quot;../../node_modules/@types/node/index.d.ts&quot; /&gt;
</code></pre></li>
<li><p>而后出现<code>Url.match is not a function</code>?</p>
<p> 解决方法：</p>
</li>
<li><p>报错：<code>Property &#39;find&#39; does not exist on type &#39;Hero[]&#39;.</code>?</p>
<p> 解决方法：在<code>typings.json</code>中配置如下代码</p>
<pre><code>{
      &quot;globalDependencies&quot;: {
        &quot;core-js&quot;: &quot;registry:dt/core-js#0.0.0+20160725163759&quot;,
        &quot;jasmine&quot;: &quot;registry:dt/jasmine#2.2.0+20160621224255&quot;,
           &quot;node&quot;: &quot;registry:dt/node#6.0.0+20160909174046&quot;
      }
}
</code></pre></li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpg"
               alt="liaoyf" />
          <p class="site-author-name" itemprop="name">liaoyf</p>
           
              <p class="site-description motion-element" itemprop="description">加油！</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">28</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">10</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/liaoyongfu" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                    
                      GitHub
                    
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">liaoyf</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.2"></script>



  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  






  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("9LYFM8dS64BIEzTbmQtY4rvd-gzGzoHsz", "5aTlsc7dgozMlgNQQ6Ob7VBR");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  

  

  

</body>
</html>
